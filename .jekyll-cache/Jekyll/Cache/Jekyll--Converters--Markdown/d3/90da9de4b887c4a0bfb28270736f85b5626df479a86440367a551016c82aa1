I"<h2 id="개요">개요</h2>
<p>네이버 클라우드 Object Storage에 저장된 Object 즉, 파일들의 Lifecycle(수명주기)를 설정할 때 관리대상이 되는 Object를 결정하는 규칙에 대해 정리해보겠습니다.</p>

<h2 id="lifecycle-management-수명주기-정책-설정">Lifecycle Management (수명주기) 정책 설정</h2>
<p>수명주기 정책 설정은 크게 정책, 관리대상, 이동위치 3가지 항목으로 구성됩니다.</p>

<h3 id="정책">정책</h3>
<p>정책 유형은 다음의 3가지가 있습니다.</p>
<ul>
  <li>만료 삭제 : 설정된 기간이 지난 파일을 삭제</li>
  <li>이관 : 설정된 기간이 지난 파일을 Archive Storage로 이동</li>
  <li>이관 후 삭제 : 설정된 기간이 지난 파일을 Archive Storage로 이동한 후 Object Storage에서 삭제</li>
</ul>

<p>그리고 이동 시점은 파일이 Object Storage에 저장-생성된 후 경과한 일자를 기준으로 하며 1일 ~ 3,650일 사이의 값을 입력합니다.</p>

<p><img src="../../images/ncp_storage_object_storage_lifecycle_01.jpg" alt="네이버 클라우드 Object Storage Lifecycle Management의 관리대상(Source) Object 접두어 설정 방법" style="width:650px;align:center" /></p>

<h3 id="관리대상-source">관리대상 (Source)</h3>
<p>관리대상의 버킷(Bucket)을 선택하고 Object 이름의 규칙을 접두어 방식으로 입력합니다.</p>

<p><img src="../../images/ncp_storage_object_storage_lifecycle_02.jpg" alt="네이버 클라우드 Object Storage Lifecycle Management의 관리대상(Source) Object 접두어 설정 방법" style="width:650px;align:center" /></p>

<h3 id="이동위치-target">이동위치 (Target)</h3>
<p>이동할 위치는 Archive Storage로 고정이며, Archive Storage의 컨테이너(버킷)을 선택하고 세부경로 즉, 폴더를 입력합니다.<br />
세부경로에 아무것도 입력하지 않으면 Source 즉, Object Storage의 위치, 폴더 구조 그대로 이동됩니다.</p>

<p><img src="../../images/ncp_storage_object_storage_lifecycle_03.jpg" alt="네이버 클라우드 Object Storage Lifecycle Management의 관리대상(Source) Object 접두어 설정 방법" style="width:650px;align:center" /></p>

<h2 id="관리대상source-object-이름-규칙">관리대상(Source) Object 이름 규칙</h2>
<ul>
  <li>네이버 클라우드에서 채택하고 있는 규칙은 <strong>접두어 방식</strong>입니다.<br />
예를 들어 규칙을 <strong>ncp</strong>라고 설정하면 이름이 ncp로 시작되는 모든 파일과 폴더가 대상이 됩니다.<br />
하지만, 접두어 규칙이기 때문에 img_ncp_01.png 처럼 파일명 중간이나 끝에 <strong>ncp</strong>가  들어간 파일과 폴더는 대상이 아닙니다.</li>
</ul>

<h2 id="object-이름-규칙의-특수-문자-사용">Object 이름 규칙의 특수 문자 사용</h2>
<ul>
  <li>&lt; &gt; : “ \ | ? * % 는 사용할수 없습니다</li>
  <li>”/”는 첫 글자에 사용할 수 없습니다.</li>
  <li>”//”처럼 “/”는 연속해서 사용할 수 없습니다.</li>
</ul>

<h2 id="적용-예시">적용 예시</h2>
<p>아래 스샷처럼 폴더와 파일이 저장되어 있다고 가정하고 예를 들어보겠습니다.<br />
다른 항목들은 동일하고, 관리대상(Source) Object 이름 규칙에 따라 어떤 결과가 나오지는 확인해보겠습니다.<br />
물론 아래의 예시들에서 공통적으로 위에서 지정한 수명주기 날짜에 해당하는 파일들만 이동하게 됩니다.</p>

<p><img src="../../images/ncp_storage_object_storage_lifecycle_04.jpg" alt="네이버 클라우드 Object Storage Lifecycle Management의 관리대상(Source) Object 접두어 설정 방법" style="width:700px;align:center" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- 3rdeyesys
	- img_01.png
	- screenshot_01.png
- 3rdeyesys_img
	- img_02.png
- ncp
	- 
- 3rdeyesys_biz.png
- ncp_server_acg_classic.png
- ncp_server_acg_vpc_inbound.png
- vpc_acg_nacl_ncp.png
</code></pre></div></div>

<p>이렇게 3rdeyesys, 3rdeyesys_img 2개의 폴더에는 각각 파일이 존재하고, ncp 폴더에는 아무것도 없습니다.  그리고 4개 파일이 루트에 저장되어 있습니다.</p>

<h4 id="object-이름-규칙접두어--3rdeyesys">Object 이름 규칙(접두어) : 3rdeyesys</h4>
<p>이 경우 Archive Storage로 이동하는 파일과 폴더는 다음과 같습니다.<br />
즉, 3rdeyesys로 시작하는 파일과 폴더 아래에 있는 파일까지 모두 이동하게 됩니다.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- 3rdeyesys
	- img_01.png
	- screenshot_01.png
- 3rdeyesys_img
	- img_02.png
- 3rdeyesys_biz.png
</code></pre></div></div>
<p><br /></p>
<h4 id="object-이름-규칙접두어--ncp">Object 이름 규칙(접두어) : ncp</h4>
<p>이 경우 Archive Storage로 이동하는 파일과 폴더는 다음과 같습니다.<br />
위의 경우와 다르게 ncp 폴더는 이동하지 않는데 그 이유는 ncp 폴더 아래에 아무 파일도 없기 때문에 이동할 파일이 없어 폴더도 이동하지 않습니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- ncp_server_acg_classic.png
- ncp_server_acg_vpc_inbound.png
</code></pre></div></div>
<p>마찬가지로 ncp 폴더 아래에 파일이 존재하더라도 위에서 지정한 수명주기 날짜에 해당하는 파일이 없는 경우에도 ncp 폴더는 이동하지 않습니다.<br />
또한 접두어 방식이기 때문에 파일명 중간에 ncp가 들어간 vpc_acg_nacl_ncp.png 파일은 해당되지 않아서 이동하지 않습니다.</p>

<h4 id="object-이름-규칙접두어--3rdeyesys-1">Object 이름 규칙(접두어) : 3rdeyesys/</h4>
<p>이렇게 뒤에 “/”를 입력하여 폴더라고 명시한 경우에 Archive Storage로 이동하는 파일과 폴더는 다음과 같습니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- 3rdeyesys
	- img_01.png
	- screenshot_01.png
</code></pre></div></div>
<p>즉, 끝에 “/”를 입력했기 때문에 3rdeyesys로 시작하는 폴더만 대상이 되어 다른 파일은 이동하지 않습니다.</p>

<h4 id="object-이름-규칙접두어--3rdeyesysimg">Object 이름 규칙(접두어) : 3rdeyesys/img</h4>
<p>이렇게 폴더와 파일명 접두어까지 함께 입력한 경우 Archive Storage로 이동하는 파일과 폴더는 다음과 같습니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- 3rdeyesys
	- img_01.png
</code></pre></div></div>
<p>즉, 3rdeyesys 폴더 아래에 있는 파일들 중에서 img로 시작하는 이름을 가진 파일만 이동하게 됩니다.</p>

<h4 id="object-이름-규칙접두어--아무것도-입력하지-않았을-때">Object 이름 규칙(접두어) : 아무것도 입력하지 않았을 때</h4>
<p>아무것도 입력하지 않았을 때는 모든 파일과 폴더 아래에 있는 파일들이 이동하게 됩니다.<br />
물론 마찬가지로 수명주기 날짜에 해당하는 파일만 이동하게되고, 폴더 아래에 해당하는 파일이 없을 경우 해동 폴더는 이동하지 않습니다.</p>

<h2 id="정책-실행-시간">정책 실행 시간</h2>
<p>Lifecycle Management(수명주기) 정책 실행시간은 아래와 같습니다.</p>

<ul>
  <li>01:00~02:00,  07:00~08:00, 13:00~14:00, 19:00~20:00<br />
 (※ 파일용량이 클 경우 일부 변동될 수 있음)</li>
</ul>

<p>예시) 정책 유형(이관), 이동 시점(생성 후 1일)로 정책을 생성하고, 대상 파일이 15시에 업로드 되었다면 다음 날 19~20시 사이에 이관 완료.</p>

<h2 id="참고-url">참고 URL</h2>
<p><a href="https://guide.ncloud-docs.com/docs/storage-storage-6-1" target="_blank" style="word-break:break-all;">https://guide.ncloud-docs.com/docs/storage-storage-6-1.html</a></p>
:ET