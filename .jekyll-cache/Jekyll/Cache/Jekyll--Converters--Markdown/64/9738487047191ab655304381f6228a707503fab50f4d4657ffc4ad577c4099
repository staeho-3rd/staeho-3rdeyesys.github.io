I"<h2 id="개요">개요</h2>
<p>2020년 12월 01일부로 CentOS6의 기술지원이 공식 종료되었습니다.<br />
yum을 이용한 패키지 설치, 업데이트 등을 할 수 없는 상황이기에 pip, Python등의 설치가 원활하지 않습니다.
그래서 pip설치에 필요한 CentOS6.x의 yum 명령을 수행하려면 
먼저 아래의 가이드대로 Repository mirror를 변경하는 Script를 다운받아 설치해야 그 다음 단계를 진행할 수 있습니다.</p>

<h2 id="목적">목적</h2>
<p>지원이 종료된 CentOS6에서 굳이 pip를 설치하려고 하는 이유는 DB 백업 파일을 aws cli를 이용해서 Object Storage에 저장하기 위해서 입니다.<br />
매 일정 시간에 DB나 소스 파일을 백업하고 백업된 파일을 Object Storage에 백업-동기화 하는 작업을 aws cli를 이용해서 처리하게 됩니다.</p>

<h2 id="repository-변경">Repository 변경</h2>
<p>이 Repository 변경 스트립트는 네이버 클라우드에서 공식 제공하는 스크립트입니다.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# wget http://repo.ncloud.com/etc/patch/Add-CentOS-Vault-Repo.sh
~# bash Add-CentOS-Vault-Repo.sh
~# yum <span class="nb">install </span>zsh
</code></pre></div></div>

<h2 id="필요-패키지들-설치">필요 패키지들 설치</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# yum <span class="nt">-y</span> groupinstall <span class="s1">'Development Tools'</span>
~# yum <span class="nt">-y</span> <span class="nb">install </span>openssl-devel<span class="k">*</span> ncurses-devel<span class="k">*</span> zlib<span class="k">*</span>.x86_64
~# yum update curl nss
</code></pre></div></div>

<h2 id="python-설치">Python 설치</h2>
<p>CentOS6에는 Python 2.6이 설치되어 있습니다.<br />
하지만, 위에서 설명한 대로 CentOS 6에 대한 지원이 종료되면서 일반적인 방법으로는 pip를 설치할 수 없습니다.<br />
몇가지 상황을 테스트 해본 결과 Python 2.7과 Python 3.5에서는 pip를 설치할 수 있는 방법을 찾았고, 그래서 여기서는 Python 3.5.10을 설치하겠습니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Python 3.5 설치 압축파일 다운로드</span>
~# wget https://www.python.org/ftp/python/3.5.10/Python-3.5.10.tgz

<span class="c"># Python 설치파일 압축해제 후 설치</span>
~# <span class="nb">tar </span>vxzf Python-3.5.10.tgz
~# <span class="nb">cd </span>Python-3.5.10
~# ./configure
~# make
~# make <span class="nb">install</span>

<span class="c"># Python 설치 확인</span>
~# which python3

<span class="c"># Python 버전 확인</span>
~# python3 <span class="nt">-V</span>
</code></pre></div></div>

<h2 id="pip-설치">PIP 설치</h2>
<p>pip설치 파일도 위에서 설치한 Python 버전에 맞는 설치파일을 다운받아서 설치해야 문제없이 설치됩니다.<br />
현재까지 문제 없는 것으로 확인된 버전은 2.7과 3.5 입니다.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# curl <span class="nt">-O</span> https://bootstrap.pypa.io/3.5/get-pip.py
~# python3 get-pip.py
</code></pre></div></div>

<p>이후에 aws cli설치나 Object Storage 백업과 관련된 내용은 다음 문서를 참고하시기 바랍니다.
<a href="/5.database/ncp_database_mysql_object_storage_auto_backup_centos/" target="_blank" style="word-break:break-all;">CentOS에서 mysql DB를 Object Storage로 자동 백업하기</a></p>

<h2 id="설치-오류-상황과-해결-방법">설치 오류 상황과 해결 방법</h2>
<p>pip를 설치하는 과정에 발생하는 몇가지 오류 상황과 그에 따른 해결방법을 정리해보겠습니다.</p>

<ol>
  <li>curl: (35) SSL connect error<br />
pip 설치파일을 다운 받기 위해 curl을 실행할 때 발생하는 오류 메시지로 위쪽에서 필요 패키지들 설치할 때 있었던 다음 명령을 실행하면 해결됩니다.</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~# yum update curl nss
</code></pre></div></div>

<ol>
  <li>SyntaxError: invalid syntax<br />
pip를 설치할 때 Python 버전이 일치하지 않는 등의 이유로 발생하는 문제입니다.<br />
위에서 설명했던 대로 Python 버전과 일치하는 pip 설치 파일을 다운 받으면 됩니다.</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 오류가 발생하는 경로</span>
~# curl <span class="nt">-O</span> https://bootstrap.pypa.io/get-pip.py

<span class="c"># 해결방법 : 경로 중간에 Python 버전을 추가</span>
~# curl <span class="nt">-O</span> https://bootstrap.pypa.io/<span class="o">{</span>Python 버전<span class="o">}</span>/get-pip.py

<span class="c"># 오류 없는 버전 예시</span>
~# curl <span class="nt">-O</span> https://bootstrap.pypa.io/2.7/get-pip.py
~# curl <span class="nt">-O</span> https://bootstrap.pypa.io/3.5/get-pip.py
</code></pre></div></div>
:ET